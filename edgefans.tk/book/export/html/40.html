<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-hans" xml:lang="zh-hans" dir="ltr">
  
<!-- Mirrored from edgefans.tk/book/export/html/40 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 27 Dec 2014 02:24:44 GMT -->
<head>
    <title>资源文件</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
    <base  />
    <script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dok2v=1613a3a185/"},atok:"abf52a451ec7c4c9a3d7ede279cc4b89",petok:"9060584055b5060e3b44bd8711c6759bb76fdc07-1419674780-1800",zone:"edgefans.tk",rocket:"0",apps:{"abetterbrowser":{"ie":"7"}}}];!function(a,b){a=document.createElement("script"),b=document.getElementsByTagName("script")[0],a.async=!0,a.src="../../../../ajax.cloudflare.com/cdn-cgi/nexp/dok2v%3d919620257c/cloudflare.min.js",b.parentNode.insertBefore(a,b)}()}}catch(e){};
//]]>
</script>
<link type="text/css" rel="stylesheet" href="../../../misc/print.css" />
      </head>
  <body>
              <div class="section-1">
                <div class="section-2">
              <div id="node-40" class="section-3">
  <h1 class="book-heading">资源文件</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login0a27.html?destination=node/40%23comment-form">登录</a>或<a href="../../../user/register0a27.html?destination=node/40%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>EDGE 游戏中有许多资源文件，里面存放了各种各样奇怪的东西。<br />
大部分资源文件都有固定且相同的文件头与命名方式。</p>
<h3>文件头</h3>
<p>出处：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/AssetHeader.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/Asse...</a><br /><code>0x00-0x07</code>: 指定引擎版本，不过游戏通常不会识别。在 EDGE 中通常使用 <code>0x0018000000000004</code>（在部分较新版本中）或 <code>0x00XX000000000003</code>（XX表示任意位）。<br /><code>0x08-0x47</code>: 一串文本，指定了当前文件原来的文件名。<br /><code>0x48-0x87</code>: 一串文本，指定了当前文件的命名空间，通常与它所在的目录名相同。</p>
<h3>命名方式</h3>
<p>出处：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/AssetHeader.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/Asse...</a><br />
文件名由三部分组成，第一部分为去掉扩展名后反转过的文件名的哈希值的十六进制表示（材料、非根模型与非根动画除外），第二部分为反转后的命名空间哈希值的十六进制表示，第三部分为扩展名，表示文件的类型。<br />
哈希算法是使用了可以自定义多项式系数（大概是这么叫法）的 CRC32，其 C# 实现：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/Util/CRC32.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/Util...</a><br />
哈希文件名时使用的多项式系数为标准算法所使用的 <code>0xEDB88320</code>，哈希命名空间时的多项式系数为前面的系数取反，即 <code>0x12477CDF</code>。<br />
命名空间可以是以下值之一：（主要取决于你放的文件夹名）</p>
<pre>audio
config
default
effects.edge_effects
effects
fx.shaders
fx
images.effects
images
levels
localization
models
music
sprites
textures</pre></div></div></div>  <div id="node-43" class="section-4">
  <h1 class="book-heading">.ean 动画</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/loginb38f.html?destination=node/43%23comment-form">登录</a>或<a href="../../../user/registerb38f.html?destination=node/43%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>.ean 动画文件存放在 models 文件夹中。它存放了游戏中使用的动画。<br />
其原来文件名的扩展名为 .rcha，使用 EdgeTool 反编译时实际输出为 .xml 文件。<br />
命名空间：<code>models</code><br />
此文件的二进制结构过于复杂，这里只讲其 XML，如有兴趣请见：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/EAN.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/EAN.cs</a><br />
反编译后得到的 XML 其根元素为 Animation 元素。</p>
</div></div></div>  <div id="node-44" class="section-5">
  <h1 class="book-heading">Animation 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login7d28.html?destination=node/44%23comment-form">登录</a>或<a href="../../../user/register7d28.html?destination=node/44%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Animation（动画），表示一个动画。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">Unknown</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">Duration</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。指定动画的时长。</td>
</tr><tr><td class="nowrap">NodeChild</td>
<td class="nowrap">文本</td>
<td>可选。指定该动画第一个子动画的ID。</td>
</tr><tr><td class="nowrap">NodeSibling</td>
<td class="nowrap">文本</td>
<td>可选。指定该动画下一个兄弟动画的ID。该属性与上面提到的 @NodeChild，实质上是<a href="http://book.51cto.com/art/201008/220481.htm">多叉树的二叉树表示方法</a>，也就是所谓的左孩子右兄弟。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Animation Duration="110"&gt;
  ...
&lt;/Animation&gt;</pre><p>子元素列表：关键帧块元素（元素名各异，0～9个）</p>
</div></div></div>  <div id="node-45" class="section-6">
  <h1 class="book-heading">关键帧块元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/loginf5f3.html?destination=node/45%23comment-form">登录</a>或<a href="../../../user/registerf5f3.html?destination=node/45%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：关键帧块元素表示对目标物体某一个属性的一系列关键帧。其元素名前半部分为 Rotate（旋转）、Scale（缩放）、Translate（平移）中的一个，后半部分为 X、Y、Z 中的一个。<br />
请注意这里的Y、Z轴方向应在关卡 .bin 格式中的基础上相互交换。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">Value</td>
<td class="nowrap">32位浮点数</td>
<td>可选，在 Rotate 和 Translate 中默认为 0，在 Scale 中默认为 1。指定动画开始前的值。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;RotateX Value="-90"&gt;
  ...
&lt;/RotateX&gt;</pre><p>子元素列表：Keyframe 元素</p>
</div></div></div>  <div id="node-46" class="section-7">
  <h1 class="book-heading">Keyframe 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/loginfab4.html?destination=node/46%23comment-form">登录</a>或<a href="../../../user/registerfab4.html?destination=node/46%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Keyframe（关键帧），表示在某一特定时刻当前物体当前属性的值，关键帧与关键帧之间将使用线性插值平滑过渡。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">Time</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为 0。指定时刻。</td>
</tr><tr><td class="nowrap">Value</td>
<td class="nowrap">32位浮点数</td>
<td>可选，在 Rotate 和 Translate 中默认为 0，在 Scale 中默认为 1。指定这一时刻的值。</td>
</tr><tr><td class="nowrap">Delta</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为 0。指定Δ。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Keyframe Time="6" Value="-89.9999888440998" Delta="19.9999977106385" /&gt;</pre></div></div></div>  </div>
</div>
</div>
<div id="node-105" class="section-5">
  <h1 class="book-heading">绘制动画树</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/loginc931.html?destination=node/105%23comment-form">登录</a>或<a href="../../../user/registerc931.html?destination=node/105%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p><img src="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/draw-animation-tree.png~original" /><br />
EdgeTool 提供了绘制动画树的功能来便于你搞清楚同一个动画中各个字动画之间的父子关系。<br />
绘制动画树时 EdgeTool 会搜索以下位置来查找某个动画的依赖项：<br /><a href="../../../developers/file-formats/asset/ean/Animation.html">/Animation</a>/@NodeChild<br /><a href="../../../developers/file-formats/asset/ean/Animation.html">/Animation</a>/@NodeSibling<br />
动画名除了可以输入下拉列表中列出的各项以外你还可以自己随便打一些乱七八糟的东西，但是你自己制作的动画很可能并不会被游戏使用。</p>
</div></div></div>  </div>
</div>
<div id="node-47" class="section-4">
  <h1 class="book-heading">.ema 材料</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/loginacd2.html?destination=node/47%23comment-form">登录</a>或<a href="../../../user/registeracd2.html?destination=node/47%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>.ema 材料文件存放在 models 文件夹中。它存放了游戏中使用的材料。<br />
其原来文件名的扩展名为 .rmdl，使用 EdgeTool 反编译时实际输出为 .xml 文件。<br />
个人认为 Two Tribes 有某种工具可以把 .rmdl 文件转换成多个 .ema 与 .eso 文件。<br />
命名空间：<code>models</code><br />
此文件的二进制结构过于复杂，如有兴趣请见：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/EMA.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/EMA.cs</a><br />
反编译后得到的 XML 其根元素为 Material 元素。</p>
<p>请注意 .ema 的文件名部分的哈希算法与其他资源文件不同，且具体算法不明。不过它们的 ID 大多会被模型引用，因此理论上来说文件名可以任意填写。</p>
</div></div></div>  <div id="node-55" class="section-5">
  <h1 class="book-heading">Material 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login4a3c.html?destination=node/55%23comment-form">登录</a>或<a href="../../../user/register4a3c.html?destination=node/55%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Material（材料），一种材料，主要决定物体表面的外观。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">Name</td>
<td class="nowrap">文本</td>
<td>可选。指定该材料的名称。其意义不明。</td>
</tr><tr><td class="nowrap">Color1</td>
<td class="nowrap">颜色</td>
<td>可选，默认为 Transparent。其意义不明。</td>
</tr><tr><td class="nowrap">Color2</td>
<td class="nowrap">颜色</td>
<td>可选，默认为 Transparent。其意义不明。</td>
</tr><tr><td class="nowrap">Color3</td>
<td class="nowrap">颜色</td>
<td>可选，默认为 Transparent。其意义不明。</td>
</tr><tr><td class="nowrap">Color4</td>
<td class="nowrap">颜色</td>
<td>可选，默认为 Transparent。其意义不明。</td>
</tr><tr><td class="nowrap">Float1</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">Int1</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">Int2</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">Int3</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">Footer4</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">Footer5</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Material Name="01_-_Default" Color1="#969696" Color2="#969696"
          Color3="#FFFFFF" Color4="#E5E5E5" Float1="1" Footer4="4"
          Footer5="5"&gt;
  ...
&lt;/Material&gt;</pre><p>子元素列表：<br />
Texture<br />
DefaultTransform<br />
AnimationBlock</p>
</div></div></div>  <div id="node-58" class="section-6">
  <h1 class="book-heading">AnimationBlock 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login5cac.html?destination=node/58%23comment-form">登录</a>或<a href="../../../user/register5cac.html?destination=node/58%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：AnimationBlock（动画块），指定了一个动画。<br />
样例：<code>&lt;AnimationBlock&gt; ... &lt;/AnimationBlock&gt;</code><br />
子元素列表：<br /><a href="../../../developers/file-formats/asset/ean/Animation/keyframe-block.html">关键帧块元素</a>（可能的元素名有 ScaleU, ScaleV, Rotation, TranslationU 和 TranslationV，元素名各异，各 0～1 个，U、V轴即图像的X、Y轴）</p>
</div></div></div>  </div>
<div id="node-57" class="section-6">
  <h1 class="book-heading">DefaultTransform 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/logind46a.html?destination=node/57%23comment-form">登录</a>或<a href="../../../user/registerd46a.html?destination=node/57%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded">说明：DefaultTransform（默认变换），指定材料的默认变换。<br />
属性列表：
<table><thead><tr><th class="nowrap">属性名</th>
            <th class="nowrap">数据类型</th>
            <th>备注</th>
        </tr></thead><tbody><tr><td class="nowrap">ScaleU</td>
            <td class="nowrap">32位浮点数</td>
            <td>可选，默认为1。指定在 U 轴（即图像的 X 轴）上的缩放级别。</td>
        </tr><tr><td class="nowrap">ScaleV</td>
            <td class="nowrap">32位浮点数</td>
            <td>可选，默认为1。指定在 V 轴（即图像的 Y 轴）上的缩放级别。</td>
        </tr><tr><td class="nowrap">Rotation</td>
            <td class="nowrap">32位浮点数</td>
            <td>可选，默认为0。指定旋转的角度。</td>
        </tr><tr><td class="nowrap">TranslationU</td>
            <td class="nowrap">32位浮点数</td>
            <td>可选，默认为0。指定在 U 轴（即图像的 X 轴）方向的平移量。</td>
        </tr><tr><td class="nowrap">TranslationV</td>
            <td class="nowrap">32位浮点数</td>
            <td>可选，默认为0。指定在 V 轴（即图像的 Y 轴）方向的平移量。</td>
        </tr></tbody></table><pre title="样例" class="brush: xml">&lt;DefaultTransform /&gt;</pre></div></div></div>  </div>
<div id="node-56" class="section-6">
  <h1 class="book-heading">Texture 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/loginde40.html?destination=node/56%23comment-form">登录</a>或<a href="../../../user/registerde40.html?destination=node/56%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Texture（图像），链接一个 <a href="../../../developers/file-formats/asset/etx.html">.etx 图像</a>，其具体使用方法不明。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">Asset</td>
<td class="nowrap">资源ID</td>
<td>可选。指定要链接的资源ID。</td>
</tr><tr><td class="nowrap">IntArray1</td>
<td class="nowrap">32位整数列表</td>
<td>可选，默认为 0,0,0,0。必须由四个数字组成。其意义不明。</td>
</tr><tr><td class="nowrap">IntArray2</td>
<td class="nowrap">32位整数列表</td>
<td>可选，默认为 0,0,0。必须由三个数字组成。其意义不明。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Texture Asset="DBC9C60A039573F7" IntArray1="2,2,2,2" /&gt;</pre></div></div></div>  </div>
</div>
</div>
<div id="node-48" class="section-4">
  <h1 class="book-heading">.eso 模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login9792.html?destination=node/48%23comment-form">登录</a>或<a href="../../../user/register9792.html?destination=node/48%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>.eso 模型文件存放在 models 文件夹中。它存放了游戏中使用的模型。<br />
其原来文件名的扩展名为 .rmdl，使用 EdgeTool 反编译时实际输出为 .xml 文件。<br />
个人认为 Two Tribes 有某种工具可以把 .rmdl 文件转换成多个 .ema 与 .eso 文件。<br />
命名空间：<code>models</code><br />
此文件的二进制结构过于复杂，如有兴趣请见：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/ESO.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/ESO.cs</a><br />
反编译后得到的 XML 其根元素为 Models 元素。<br />
你可以使用 EdgeTool 中查看模型的功能来看看这是什么个鬼东西。</p>
</div></div></div>  <div id="node-59" class="section-5">
  <h1 class="book-heading">Models 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/logina4d9.html?destination=node/59%23comment-form">登录</a>或<a href="../../../user/registera4d9.html?destination=node/59%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：代表一个 .eso 文件，并定义了所有子模型的转换。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">V01</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">V02</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">NodeChild</td>
<td class="nowrap">资源ID</td>
<td>可选。指定该模型第一个子模型的ID。父模型的变换会影响到子模型。</td>
</tr><tr><td class="nowrap">NodeSibling</td>
<td class="nowrap">资源ID</td>
<td>可选。指定该模型下一个兄弟模型的ID。该属性与上面提到的 @NodeChild，实质上是<a href="http://book.51cto.com/art/201008/220481.htm">多叉树的二叉树表示方法</a>，也就是所谓的左孩子右兄弟。</td>
</tr><tr><td class="nowrap">V07</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">V08</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">V09</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">ScaleXYZ</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为1。指定所有轴上的缩放级别。应用动画时此项会失效。</td>
</tr><tr><td class="nowrap">Translate</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。指定平移量。应用动画时此项会失效。</td>
</tr><tr><td class="nowrap">Rotate</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。指定旋转量。应用动画时此项会失效。</td>
</tr><tr><td class="nowrap">Scale</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为1,1,1。指定缩放大小。应用动画时此项会失效。</td>
</tr><tr><td class="nowrap">V20</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">V21</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">BoundingMin</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。仅在有 Model 元素时有效。指定最小坐标。警告：错误地设置该值会导致模型突然出现或消失。</td>
</tr><tr><td class="nowrap">BoundingMax</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。仅在有 Model 元素时有效。指定最大坐标。警告：错误地设置该值会导致模型突然出现或消失。</td>
</tr><tr><td class="nowrap">FooterV01</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。仅在有 Model 元素时有效。其意义不明。</td>
</tr><tr><td class="nowrap">FooterV02</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。仅在有 Model 元素时有效。其意义不明。</td>
</tr><tr><td class="nowrap">FooterV03</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。仅在有 Model 元素时有效。其意义不明。</td>
</tr><tr><td class="nowrap">FooterV04</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。仅在有 Model 元素时有效。其意义不明。</td>
</tr><tr><td class="nowrap">AutoNormals</td>
<td class="nowrap">布尔型</td>
<td>可选，默认为False。<a href="../../../developers/syntactic-sugar.html">语法糖</a>。表示是否要为该元素下的三角形中没有设置法线的顶点生成与所在平面垂直的法线。</td>
</tr><tr><td class="nowrap">ApplyTransform</td>
<td class="nowrap">特殊</td>
<td>可选，默认为 Copy。<a href="../../../developers/syntactic-sugar.html">语法糖</a>。指定是否需要预处理顶点和法线的变换，以避免应用动画时模型中指定的变换被覆盖。具体效果见附表。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Models V01="1" Translate="-901.876,-797.4585,31.30136" V20="1"
        BoundingMin="-2261.529,-1535.439,-799.6431"
        BoundingMax="951.2814,156.3801,1367.22"&gt;
  ...
&lt;/Models&gt;</pre><p>子元素列表：Model</p>
<p>附：由于矩阵乘法交换律不成立，因此游戏对模型操作的顺序至关重要。到目前为止，EdgeTool 使用的操作顺序是：Scale、Rotate、Translate。<br />
附表：</p>
<table><thead><tr><th>@ApplyTransform</th>
<th>预处理变换次数</th>
<th>输出变换</th>
<th>默认效果</th>
<th>应用动画后效果</th>
</tr></thead><tbody><tr><td>Copy</td>
<td>0</td>
<td>√</td>
<td>应用变换 1 次</td>
<td>无效果</td>
</tr><tr><td>Remove</td>
<td>0</td>
<td>×</td>
<td>无效果</td>
<td>无效果</td>
</tr><tr><td>Multiplication</td>
<td>1</td>
<td>×</td>
<td>应用变换 1 次</td>
<td>应用变换 1 次</td>
</tr><tr><td>MultiplicationOnly</td>
<td>1</td>
<td>√</td>
<td>应用变换 2 次</td>
<td>应用变换 1 次</td>
</tr><tr><td>Division</td>
<td>-1</td>
<td>×</td>
<td>应用逆变换 1 次</td>
<td>应用逆变换 1 次</td>
</tr><tr><td>DivisionOnly</td>
<td>-1</td>
<td>√</td>
<td>无效果</td>
<td>应用逆变换 1 次</td>
</tr></tbody></table></div></div></div>  <div id="node-60" class="section-6">
  <h1 class="book-heading">Model 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/loginb5ee.html?destination=node/60%23comment-form">登录</a>或<a href="../../../user/registerb5ee.html?destination=node/60%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Model（模型），表示一个 3D 模型。尽管很不符合常理，但是定义在前面的模型/三角形如果比后面的离相机更近（即 X, Y, Z 坐标之和更大），那么即使它是半透明的，后面的也不会显示出来，如下图所示。因此如果有半透明的模型应该尽量将离相机远的（即 X, Y, Z 坐标之和小的）先定义。<br /><img src="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/overwrite-bug.png~original" /><br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">MaterialAsset</td>
<td class="nowrap">资源ID</td>
<td>可选。指定一个要使用的<a href="../../../developers/file-formats/asset/ema.html">材料（.ema 文件）</a>。</td>
</tr><tr><td class="nowrap">AutoNormals</td>
<td class="nowrap">布尔型</td>
<td>可选。<a href="../../../developers/syntactic-sugar.html">语法糖</a>。如果没有填写则继承父元素的设置。表示是否要为该元素下的三角形中没有设置法线的顶点生成与所在平面垂直的法线。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Model MaterialAsset="79C81114050DB82A"&gt;
  ...
&lt;/Model&gt;</pre><p>子元素列表：Triangle</p>
</div></div></div>  <div id="node-61" class="section-7">
  <h1 class="book-heading">Triangle 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/logina1dc.html?destination=node/61%23comment-form">登录</a>或<a href="../../../user/registera1dc.html?destination=node/61%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Triangle（三角形），表示在三维空间中的一个三角形表面。你可以利用多个三角形表面组合来组成矩形、平行四边形、五边形，甚至是球面。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">AutoNormals</td>
<td class="nowrap">布尔型</td>
<td>可选。<a href="../../../developers/syntactic-sugar.html">语法糖</a>。如果没有填写则继承父元素的设置。表示是否要为该元素下的三角形中没有设置法线的顶点生成与所在平面垂直的法线。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Triangle&gt;
  ...
&lt;/Triangle&gt;</pre><p>子元素列表：Vertex（3个，当三个顶点朝某一方向按定义的顺序观察时是按顺时针旋转时这一方向为三角形的正面，三角形的背面是透明的，从背面看过去可以穿过它）</p>
</div></div></div>  <div id="node-62" class="section-8">
  <h1 class="book-heading">Vertex 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login0a3c.html?destination=node/62%23comment-form">登录</a>或<a href="../../../user/register0a3c.html?destination=node/62%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Vertex（顶点），表示一个三角形的一个顶点。以下内容可能需要一定的 3D 知识。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">Position</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。指定该点的空间坐标。</td>
</tr><tr><td class="nowrap">Normal</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。指定该点的法线方向。</td>
</tr><tr><td class="nowrap">Color</td>
<td class="nowrap">颜色</td>
<td>可选，默认为 Transparent。指定该点的着色（colorize）。如果没有使用任何纹理，默认会使用全白的。如果所有 Color 都没有填写，那么在游戏中似乎会显示为 #B8B8B8。</td>
</tr><tr><td class="nowrap">TexCoord</td>
<td class="nowrap">二维浮点向量</td>
<td>可选，默认为0,0。指定该点的纹理坐标。有时候该值的范围可能超出(0,0)-(1,1)，此时很可能需要对该值进行加减一个整数来使其重返这个范围内。该值理论上不能和@Color并存。</td>
</tr><tr><td class="nowrap">Unknown</td>
<td class="nowrap">二维浮点向量</td>
<td>可选，默认为0,0。其用法不明。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Vertex Position="-55.21204,-1160.818,433.7133" Normal="0,1,0.000244"
        TexCoord="0.276604,0.498435" /&gt;</pre></div></div></div>  </div>
</div>
</div>
</div>
<div id="node-94" class="section-5">
  <h1 class="book-heading">关卡模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login1aaa.html?destination=node/94%23comment-form">登录</a>或<a href="../../../user/register1aaa.html?destination=node/94%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>　　通常情况下，任意一个关卡都对应着一个 .eso 模型，里面存放着该关卡中墙壁与地面的外观，这就是所谓的关卡模型。通常情况下它有两个子模型，分别是<a href="../../../developers/file-formats/asset/eso/level-model/islands.html">关卡岛屿模型</a>与<a href="../../../developers/file-formats/asset/eso/level-model/stars.html">关卡星星模型</a>。<br />
　　在忽略 Models 元素中各种变换的情况下，一个在关卡 .bin 文件中定义的方块位置 (x, y, z) 可以在模型中转换成一个 1x1x1（当然如果方块的 <a href="../../../developers/file-formats/level-bin/z.html">Z 坐标</a>为 0 则是 1x0.5x1）的正方体，它离原点最近的一点为 (x, z, y - 关卡长度)（如果方块的 Z 坐标为 0 则这一点是 (x, 0.5, y - 关卡长度)），离原点最远的一点为 (x + 1, z + 1, y - 关卡长度 + 1)。<br />
　　在极早期的 EDGE 中由于关卡模型在 y=0 到 y=0.5 之间没有物体，因此整体的 y 坐标都上移了 0.5 来使最低的 y 坐标达到 1，不过后来又由于未知的原因（估计是因为觉得这么做太蠢了）而放弃了。如果你不幸的遇到了这样的模型，你可以将 <a href="../../../developers/file-formats/asset/eso/Models.html">Models</a>/@Translate 的 Y 坐标减去 0.5 来修复问题。<br />
　　通常情况下一个方块最多有三个面，即上面、东面和南面，此时它的上方、东方、南方都没有方块，也就是没有被遮挡。其中上面的颜色除了由 Z 坐标确定以外，为了达到棋盘的效果还会深浅相间。当方块的 x + y 为偶数时上面是浅色，是奇数时为深色。而另外三个面由于在大多数时候不会被玩家看到因此没有必要制作。</p>
</div></div></div>  <div id="node-95" class="section-6">
  <h1 class="book-heading">winter 关卡模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/logina0ad.html?destination=node/95%23comment-form">登录</a>或<a href="../../../user/registera0ad.html?destination=node/95%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>winter 关卡模型与一般的关卡模型略有不同。它的根模型是一个空模型，下面有两个子模型：</p>
<ol><li>第一个子模型就是一般的关卡模型；</li>
<li>第二个子模型里是雪的模型，由于雪模型的材料没有使用纹理，因此在 EdgeTool 的<a href="../../../developers/file-formats/asset/drawing-model-tree.html">绘制模型树</a>功能中暂时只能用全白表示。</li>
</ol></div></div></div>  </div>
<div id="node-99" class="section-6">
  <h1 class="book-heading">关卡岛屿模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login313a.html?destination=node/99%23comment-form">登录</a>或<a href="../../../user/register313a.html?destination=node/99%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>　　关卡岛屿模型是关卡模型的子模型中的第一个，顾名思义里面是一些在空中随机位置飘浮的岛屿。<br />
　　研究表明尽管 level543 这个关卡并不存在，绘制模型树时却可以看到这一关的模型，但这一关的模型并不符合一般关卡模型的格式，而且有几个子模型与其他岛屿模型的外观相同，因此这一关很可能是用来生成那些岛屿模型的测试关卡。<br />
　　通常情况下为了避免和关卡模型冲突，关卡岛屿模型中的内容都在 xOz 平面（y=0）以下，一个例外是在 voodoo dance 的临近终点处中有一个模型跑到了关卡模型上方。<br /><a href="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/level-island-model.png~original"><img src="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/level-island-model.png~original" /></a></p>
</div></div></div>  </div>
<div id="node-100" class="section-6">
  <h1 class="book-heading">关卡星星模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login84d5.html?destination=node/100%23comment-form">登录</a>或<a href="../../../user/register84d5.html?destination=node/100%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>　　关卡星星模型是关卡模型的子模型中的第二个，顾名思义里面是在空中随机位置飘浮的星星。<br />
　　它们实际上是正方形，但由于在游戏中距离太远，玩家并不会意识到它是正方形。如果你在恰当的位置通过使用 <a href="../../../developers/file-formats/level-bin/Level/CameraTrigger.html">/Level/CameraTrigger</a>/@Angle=-1 开启平行投影，你可以看到这些正方形其实还是挺大的。<br />
　　通常情况下为了避免和关卡模型冲突，关卡星星模型中的内容同样也都在 xOz 平面（y=0）以下。</p>
</div></div></div>  </div>
</div>
</div>
<div id="node-41" class="section-4">
  <h1 class="book-heading">.etx 纹理</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login80fb.html?destination=node/41%23comment-form">登录</a>或<a href="../../../user/register80fb.html?destination=node/41%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>.etx 纹理文件存放在 textures 文件夹中。它存放了游戏中要使用的纹理，它们实际上就是图像。如果游戏在 textures 文件夹下没有找到对应的文件，就会显示 default/CBB649F112744E56.etx (default.img.png)，它看起来是像这个样子：<br /><img src="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/defaultimg.png~original" /><br />
其原来文件名的扩展名为 .img，使用 EdgeTool 反编译时实际输出为 .png 图像。<br />
命名空间：<code>textures</code>（仅对于 textures 文件夹下的 .etx 文件而言，在极早期的版本中的命名空间为 <code>models.textures</code>）<br />
EDGE 的版本不同，.etx 的格式也不同，大致可以分为下面两种。</p>
<h3>早期版本</h3>
<p>C# 实现：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/ETX1803.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/ETX1...</a><br />
引擎版本：<code>0x00XX000000000003</code><br />
去掉资源文件头后下面就是一个 PNG 图像，也就是说去掉文件头后这个文件与 .png 文件无异。</p>
<h3>新版</h3>
<p>C# 实现：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/ETX1804.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/ETX1...</a><br />
引擎版本：<code>0x0018000000000004</code><br /><code>0x88-0x89</code>: 指定图像宽度。<br /><code>0x8A-0x8B</code>: 指定图像高度。<br /><code>0x8C-0x8F</code>: 不明，似乎永远为 <code>0x00000002</code>。<br /><code>0x90-0x93</code>: 下面位图数据的长度。<br /><code>0x94-</code>: 位图数据，以 BGRA32 格式存储。</p>
</div></div></div>  </div>
<div id="node-64" class="section-4">
  <h1 class="book-heading">绘制模型树</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login1c71.html?destination=node/64%23comment-form">登录</a>或<a href="../../../user/register1c71.html?destination=node/64%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p><a href="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/edgetool-draw-model-tree.png~original"><img src="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/edgetool-draw-model-tree.png~original" /></a><br />
EdgeTool 提供了绘制模型树的功能，这有利于你寻找一些特定模型的内容。<br />
绘制模型树时 EdgeTool 会搜索以下位置来查找某个模型/材料的依赖项：<br /><a href="../../../developers/file-formats/asset/eso/Models.html">/Models</a>/@NodeChild<br /><a href="../../../developers/file-formats/asset/eso/Models.html">/Models</a>/@NodeSibling<br /><a href="../../../developers/file-formats/asset/eso/Models/Model.html">/Models/Model</a>/@MaterialAsset<br /><a href="../../../developers/file-formats/asset/ema/Material/Texture.html">/Material/Texture</a>/@Asset<br />
模型名除了可以输入关卡的关卡名以外还可以输入下拉列表中列出的各项，你应该避免把你的关卡的文件名设为这些文本。</p>
</div></div></div>  </div>
</div>
    </div></div>  </body>

<!-- Mirrored from edgefans.tk/book/export/html/40 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 27 Dec 2014 02:24:44 GMT -->
</html>

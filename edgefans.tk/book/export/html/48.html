<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-hans" xml:lang="zh-hans" dir="ltr">
  
<!-- Mirrored from edgefans.tk/book/export/html/48 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 27 Dec 2014 02:25:34 GMT -->
<head>
    <title>.eso 模型</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
    <base  />
    <script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dok2v=1613a3a185/"},atok:"abf52a451ec7c4c9a3d7ede279cc4b89",petok:"e566d86bc5501907e8f8338f6c336508852b468a-1419674900-1800",zone:"edgefans.tk",rocket:"0",apps:{"abetterbrowser":{"ie":"7"}}}];!function(a,b){a=document.createElement("script"),b=document.getElementsByTagName("script")[0],a.async=!0,a.src="../../../../ajax.cloudflare.com/cdn-cgi/nexp/dok2v%3d919620257c/cloudflare.min.js",b.parentNode.insertBefore(a,b)}()}}catch(e){};
//]]>
</script>
<link type="text/css" rel="stylesheet" href="../../../misc/print.css" />
      </head>
  <body>
              <div class="section-1">
                <div class="section-2">
                <div class="section-3">
              <div id="node-48" class="section-4">
  <h1 class="book-heading">.eso 模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login9792.html?destination=node/48%23comment-form">登录</a>或<a href="../../../user/register9792.html?destination=node/48%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>.eso 模型文件存放在 models 文件夹中。它存放了游戏中使用的模型。<br />
其原来文件名的扩展名为 .rmdl，使用 EdgeTool 反编译时实际输出为 .xml 文件。<br />
个人认为 Two Tribes 有某种工具可以把 .rmdl 文件转换成多个 .ema 与 .eso 文件。<br />
命名空间：<code>models</code><br />
此文件的二进制结构过于复杂，如有兴趣请见：<a href="https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/ESO.cs">https://github.com/WillKirkby/LibTwoTribes/blob/master/LibTwoTribes/ESO.cs</a><br />
反编译后得到的 XML 其根元素为 Models 元素。<br />
你可以使用 EdgeTool 中查看模型的功能来看看这是什么个鬼东西。</p>
</div></div></div>  <div id="node-59" class="section-5">
  <h1 class="book-heading">Models 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/logina4d9.html?destination=node/59%23comment-form">登录</a>或<a href="../../../user/registera4d9.html?destination=node/59%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：代表一个 .eso 文件，并定义了所有子模型的转换。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">V01</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">V02</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">NodeChild</td>
<td class="nowrap">资源ID</td>
<td>可选。指定该模型第一个子模型的ID。父模型的变换会影响到子模型。</td>
</tr><tr><td class="nowrap">NodeSibling</td>
<td class="nowrap">资源ID</td>
<td>可选。指定该模型下一个兄弟模型的ID。该属性与上面提到的 @NodeChild，实质上是<a href="http://book.51cto.com/art/201008/220481.htm">多叉树的二叉树表示方法</a>，也就是所谓的左孩子右兄弟。</td>
</tr><tr><td class="nowrap">V07</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">V08</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">V09</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">ScaleXYZ</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为1。指定所有轴上的缩放级别。应用动画时此项会失效。</td>
</tr><tr><td class="nowrap">Translate</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。指定平移量。应用动画时此项会失效。</td>
</tr><tr><td class="nowrap">Rotate</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。指定旋转量。应用动画时此项会失效。</td>
</tr><tr><td class="nowrap">Scale</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为1,1,1。指定缩放大小。应用动画时此项会失效。</td>
</tr><tr><td class="nowrap">V20</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">V21</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。其意义不明。</td>
</tr><tr><td class="nowrap">BoundingMin</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。仅在有 Model 元素时有效。指定最小坐标。警告：错误地设置该值会导致模型突然出现或消失。</td>
</tr><tr><td class="nowrap">BoundingMax</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。仅在有 Model 元素时有效。指定最大坐标。警告：错误地设置该值会导致模型突然出现或消失。</td>
</tr><tr><td class="nowrap">FooterV01</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。仅在有 Model 元素时有效。其意义不明。</td>
</tr><tr><td class="nowrap">FooterV02</td>
<td class="nowrap">32位浮点数</td>
<td>可选，默认为0。仅在有 Model 元素时有效。其意义不明。</td>
</tr><tr><td class="nowrap">FooterV03</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。仅在有 Model 元素时有效。其意义不明。</td>
</tr><tr><td class="nowrap">FooterV04</td>
<td class="nowrap">32位整数</td>
<td>可选，默认为0。仅在有 Model 元素时有效。其意义不明。</td>
</tr><tr><td class="nowrap">AutoNormals</td>
<td class="nowrap">布尔型</td>
<td>可选，默认为False。<a href="../../../developers/syntactic-sugar.html">语法糖</a>。表示是否要为该元素下的三角形中没有设置法线的顶点生成与所在平面垂直的法线。</td>
</tr><tr><td class="nowrap">ApplyTransform</td>
<td class="nowrap">特殊</td>
<td>可选，默认为 Copy。<a href="../../../developers/syntactic-sugar.html">语法糖</a>。指定是否需要预处理顶点和法线的变换，以避免应用动画时模型中指定的变换被覆盖。具体效果见附表。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Models V01="1" Translate="-901.876,-797.4585,31.30136" V20="1"
        BoundingMin="-2261.529,-1535.439,-799.6431"
        BoundingMax="951.2814,156.3801,1367.22"&gt;
  ...
&lt;/Models&gt;</pre><p>子元素列表：Model</p>
<p>附：由于矩阵乘法交换律不成立，因此游戏对模型操作的顺序至关重要。到目前为止，EdgeTool 使用的操作顺序是：Scale、Rotate、Translate。<br />
附表：</p>
<table><thead><tr><th>@ApplyTransform</th>
<th>预处理变换次数</th>
<th>输出变换</th>
<th>默认效果</th>
<th>应用动画后效果</th>
</tr></thead><tbody><tr><td>Copy</td>
<td>0</td>
<td>√</td>
<td>应用变换 1 次</td>
<td>无效果</td>
</tr><tr><td>Remove</td>
<td>0</td>
<td>×</td>
<td>无效果</td>
<td>无效果</td>
</tr><tr><td>Multiplication</td>
<td>1</td>
<td>×</td>
<td>应用变换 1 次</td>
<td>应用变换 1 次</td>
</tr><tr><td>MultiplicationOnly</td>
<td>1</td>
<td>√</td>
<td>应用变换 2 次</td>
<td>应用变换 1 次</td>
</tr><tr><td>Division</td>
<td>-1</td>
<td>×</td>
<td>应用逆变换 1 次</td>
<td>应用逆变换 1 次</td>
</tr><tr><td>DivisionOnly</td>
<td>-1</td>
<td>√</td>
<td>无效果</td>
<td>应用逆变换 1 次</td>
</tr></tbody></table></div></div></div>  <div id="node-60" class="section-6">
  <h1 class="book-heading">Model 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/loginb5ee.html?destination=node/60%23comment-form">登录</a>或<a href="../../../user/registerb5ee.html?destination=node/60%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Model（模型），表示一个 3D 模型。尽管很不符合常理，但是定义在前面的模型/三角形如果比后面的离相机更近（即 X, Y, Z 坐标之和更大），那么即使它是半透明的，后面的也不会显示出来，如下图所示。因此如果有半透明的模型应该尽量将离相机远的（即 X, Y, Z 坐标之和小的）先定义。<br /><img src="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/overwrite-bug.png~original" /><br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">MaterialAsset</td>
<td class="nowrap">资源ID</td>
<td>可选。指定一个要使用的<a href="../../../developers/file-formats/asset/ema.html">材料（.ema 文件）</a>。</td>
</tr><tr><td class="nowrap">AutoNormals</td>
<td class="nowrap">布尔型</td>
<td>可选。<a href="../../../developers/syntactic-sugar.html">语法糖</a>。如果没有填写则继承父元素的设置。表示是否要为该元素下的三角形中没有设置法线的顶点生成与所在平面垂直的法线。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Model MaterialAsset="79C81114050DB82A"&gt;
  ...
&lt;/Model&gt;</pre><p>子元素列表：Triangle</p>
</div></div></div>  <div id="node-61" class="section-7">
  <h1 class="book-heading">Triangle 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/logina1dc.html?destination=node/61%23comment-form">登录</a>或<a href="../../../user/registera1dc.html?destination=node/61%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Triangle（三角形），表示在三维空间中的一个三角形表面。你可以利用多个三角形表面组合来组成矩形、平行四边形、五边形，甚至是球面。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">AutoNormals</td>
<td class="nowrap">布尔型</td>
<td>可选。<a href="../../../developers/syntactic-sugar.html">语法糖</a>。如果没有填写则继承父元素的设置。表示是否要为该元素下的三角形中没有设置法线的顶点生成与所在平面垂直的法线。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Triangle&gt;
  ...
&lt;/Triangle&gt;</pre><p>子元素列表：Vertex（3个，当三个顶点朝某一方向按定义的顺序观察时是按顺时针旋转时这一方向为三角形的正面，三角形的背面是透明的，从背面看过去可以穿过它）</p>
</div></div></div>  <div id="node-62" class="section-8">
  <h1 class="book-heading">Vertex 元素</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login0a3c.html?destination=node/62%23comment-form">登录</a>或<a href="../../../user/register0a3c.html?destination=node/62%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>说明：Vertex（顶点），表示一个三角形的一个顶点。以下内容可能需要一定的 3D 知识。<br />
属性列表：</p>
<table><thead><tr><th class="nowrap">属性名</th>
<th class="nowrap">数据类型</th>
<th>备注</th>
</tr></thead><tbody><tr><td class="nowrap">Position</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。指定该点的空间坐标。</td>
</tr><tr><td class="nowrap">Normal</td>
<td class="nowrap">三维浮点向量</td>
<td>可选，默认为0,0,0。指定该点的法线方向。</td>
</tr><tr><td class="nowrap">Color</td>
<td class="nowrap">颜色</td>
<td>可选，默认为 Transparent。指定该点的着色（colorize）。如果没有使用任何纹理，默认会使用全白的。如果所有 Color 都没有填写，那么在游戏中似乎会显示为 #B8B8B8。</td>
</tr><tr><td class="nowrap">TexCoord</td>
<td class="nowrap">二维浮点向量</td>
<td>可选，默认为0,0。指定该点的纹理坐标。有时候该值的范围可能超出(0,0)-(1,1)，此时很可能需要对该值进行加减一个整数来使其重返这个范围内。该值理论上不能和@Color并存。</td>
</tr><tr><td class="nowrap">Unknown</td>
<td class="nowrap">二维浮点向量</td>
<td>可选，默认为0,0。其用法不明。</td>
</tr></tbody></table><pre title="样例" class="brush: xml">&lt;Vertex Position="-55.21204,-1160.818,433.7133" Normal="0,1,0.000244"
        TexCoord="0.276604,0.498435" /&gt;</pre></div></div></div>  </div>
</div>
</div>
</div>
<div id="node-94" class="section-5">
  <h1 class="book-heading">关卡模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login1aaa.html?destination=node/94%23comment-form">登录</a>或<a href="../../../user/register1aaa.html?destination=node/94%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>　　通常情况下，任意一个关卡都对应着一个 .eso 模型，里面存放着该关卡中墙壁与地面的外观，这就是所谓的关卡模型。通常情况下它有两个子模型，分别是<a href="../../../developers/file-formats/asset/eso/level-model/islands.html">关卡岛屿模型</a>与<a href="../../../developers/file-formats/asset/eso/level-model/stars.html">关卡星星模型</a>。<br />
　　在忽略 Models 元素中各种变换的情况下，一个在关卡 .bin 文件中定义的方块位置 (x, y, z) 可以在模型中转换成一个 1x1x1（当然如果方块的 <a href="../../../developers/file-formats/level-bin/z.html">Z 坐标</a>为 0 则是 1x0.5x1）的正方体，它离原点最近的一点为 (x, z, y - 关卡长度)（如果方块的 Z 坐标为 0 则这一点是 (x, 0.5, y - 关卡长度)），离原点最远的一点为 (x + 1, z + 1, y - 关卡长度 + 1)。<br />
　　在极早期的 EDGE 中由于关卡模型在 y=0 到 y=0.5 之间没有物体，因此整体的 y 坐标都上移了 0.5 来使最低的 y 坐标达到 1，不过后来又由于未知的原因（估计是因为觉得这么做太蠢了）而放弃了。如果你不幸的遇到了这样的模型，你可以将 <a href="../../../developers/file-formats/asset/eso/Models.html">Models</a>/@Translate 的 Y 坐标减去 0.5 来修复问题。<br />
　　通常情况下一个方块最多有三个面，即上面、东面和南面，此时它的上方、东方、南方都没有方块，也就是没有被遮挡。其中上面的颜色除了由 Z 坐标确定以外，为了达到棋盘的效果还会深浅相间。当方块的 x + y 为偶数时上面是浅色，是奇数时为深色。而另外三个面由于在大多数时候不会被玩家看到因此没有必要制作。</p>
</div></div></div>  <div id="node-95" class="section-6">
  <h1 class="book-heading">winter 关卡模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/logina0ad.html?destination=node/95%23comment-form">登录</a>或<a href="../../../user/registera0ad.html?destination=node/95%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>winter 关卡模型与一般的关卡模型略有不同。它的根模型是一个空模型，下面有两个子模型：</p>
<ol><li>第一个子模型就是一般的关卡模型；</li>
<li>第二个子模型里是雪的模型，由于雪模型的材料没有使用纹理，因此在 EdgeTool 的<a href="../../../developers/file-formats/asset/drawing-model-tree.html">绘制模型树</a>功能中暂时只能用全白表示。</li>
</ol></div></div></div>  </div>
<div id="node-99" class="section-6">
  <h1 class="book-heading">关卡岛屿模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login313a.html?destination=node/99%23comment-form">登录</a>或<a href="../../../user/register313a.html?destination=node/99%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>　　关卡岛屿模型是关卡模型的子模型中的第一个，顾名思义里面是一些在空中随机位置飘浮的岛屿。<br />
　　研究表明尽管 level543 这个关卡并不存在，绘制模型树时却可以看到这一关的模型，但这一关的模型并不符合一般关卡模型的格式，而且有几个子模型与其他岛屿模型的外观相同，因此这一关很可能是用来生成那些岛屿模型的测试关卡。<br />
　　通常情况下为了避免和关卡模型冲突，关卡岛屿模型中的内容都在 xOz 平面（y=0）以下，一个例外是在 voodoo dance 的临近终点处中有一个模型跑到了关卡模型上方。<br /><a href="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/level-island-model.png~original"><img src="http://i1264.photobucket.com/albums/jj483/MygodStudio/edgefans/level-island-model.png~original" /></a></p>
</div></div></div>  </div>
<div id="node-100" class="section-6">
  <h1 class="book-heading">关卡星星模型</h1>
  <div class="form-item form-type-item">
  <label>语言 </label>
 Chinese, Simplified
</div>
<ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../../user/login84d5.html?destination=node/100%23comment-form">登录</a>或<a href="../../../user/register84d5.html?destination=node/100%23comment-form">注册</a>后发表评论</span></li>
</ul><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>　　关卡星星模型是关卡模型的子模型中的第二个，顾名思义里面是在空中随机位置飘浮的星星。<br />
　　它们实际上是正方形，但由于在游戏中距离太远，玩家并不会意识到它是正方形。如果你在恰当的位置通过使用 <a href="../../../developers/file-formats/level-bin/Level/CameraTrigger.html">/Level/CameraTrigger</a>/@Angle=-1 开启平行投影，你可以看到这些正方形其实还是挺大的。<br />
　　通常情况下为了避免和关卡模型冲突，关卡星星模型中的内容同样也都在 xOz 平面（y=0）以下。</p>
</div></div></div>  </div>
</div>
</div>
    </div></div></div>  </body>

<!-- Mirrored from edgefans.tk/book/export/html/48 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 27 Dec 2014 02:25:34 GMT -->
</html>
